Вот подробное объяснение кода вашего Telegram-бота для поиска учебников:

1. Импорт библиотек и настройка бота
python
import telebot
from telebot import types
import os

bot = telebot.TeleBot('TOKEN')  # Здесь нужно вставить ваш токен от BotFather
telebot - основная библиотека для работы с Telegram API

types - для создания кнопок и клавиатур

os - для работы с файловой системой

bot - объект бота, через который происходят все взаимодействия

2. Настройка папки с учебниками
python
BOOKS_FOLDER = "textbooks/"
Указывает папку, где хранятся файлы учебников (PDF-файлы должны быть в формате algebra_7.pdf, algebra_8.pdf и т.д.)

3. Обработчик команд /start и /help
python
@bot.message_handler(commands=['start', 'help'])
def send_welcome(message):
    bot.reply_to(message, "Привет! Я бот для поиска учебников...")
Отправляет приветственное сообщение при вводе команд /start или /help

4. Основной обработчик текстовых сообщений
python
@bot.message_handler(content_types=['text'])
def handle_text(message):
    user_input = message.text.lower()
    
    if user_input == "привет":
        # Ответ на приветствие
    elif user_input == "алгебра":
        # Создание клавиатуры с выбором класса
        keyboard = types.InlineKeyboardMarkup()
        # Добавление кнопок для 7,8,9 классов
        # Отправка сообщения с клавиатурой
    else:
        # Сообщение, если предмет не найден
Обрабатывает обычные текстовые сообщения

На "привет" отвечает приветствием

На "алгебра" показывает кнопки выбора класса

Для других предметов сообщает об отсутствии учебников

5. Обработчик нажатий на кнопки
python
@bot.callback_query_handler(func=lambda call: True)
def callback_inline(call):
    if call.data.startswith('algebra_'):
        class_num = call.data.split('_')[1]  # Извлекаем номер класса
        file_path = os.path.join(BOOKS_FOLDER, f"algebra_{class_num}.pdf")
        
        try:
            # Отправка файла
            with open(file_path, 'rb') as file:
                bot.send_document(...)
        except FileNotFoundError:
            # Сообщение если файл не найден
    else:
        # Сообщение для неизвестных команд
Получает данные о нажатой кнопке

Формирует путь к файлу учебника

Пытается отправить файл или сообщает об ошибке

Как это работает:
Пользователь пишет боту "алгебра"

Бот показывает кнопки с классами (7-9)

При выборе класса бот ищет соответствующий PDF-файл

Если файл найден - отправляет его, если нет - сообщает об ошибке

Что нужно для работы:
Создать папку textbooks рядом со скриптом

Положить туда файлы учебников с именами:

algebra_7.pdf

algebra_8.pdf

algebra_9.pdf

Вставить реальный токен бота вместо 'TOKEN'

Бот готов к использованию! Он будет принимать сообщения, предлагать выбор класса для алгебры и отправлять соответствующие учебники.
